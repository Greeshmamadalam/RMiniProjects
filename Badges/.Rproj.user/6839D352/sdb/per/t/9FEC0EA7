{
    "collab_server" : "",
    "contents" : "require(httr)\nrequire(dplyr)\n\nallUsers <- get.V2UsersList()\nget.DSRbadge <- function(uuid){\n  url <- paste0(\"http://analytics-prod-proxy.cluster.kountable.com:3000/franks/profiles/\",uuid,\"/badges\")\n  cat(\"uuid\",uuid,\"\\n\") \n  badgedata <- GET(url) %>% content(\"parsed\")\n  tbl.DSRbadge <- data_frame(uuid = uuid,\n                              profileCompleteness =ifelse(badgedata$badge1$personBadgeCriteria[[1]]$status==\"FALSE\",0,1),\n                              mediaCompleteness = ifelse(badgedata$badge1$personBadgeCriteria[[2]]$status==\"FALSE\",0,1),\n                              responsiveness = ifelse(badgedata$badge1$personBadgeCriteria[[3]]$status==\"FALSE\",0,1),\n                              badge1 = ifelse(badgedata$badge1$status==\"FALSE\",0,1),\n                              projectData = ifelse(badgedata$badge2$personBadgeCriteria[[1]]$status==\"FALSE\",0,1),\n                              projectDocumentScore = ifelse(badgedata$badge2$personBadgeCriteria[[2]]$status==\"FALSE\",0,1),\n                              badge2 = ifelse(badgedata$badge2$status==\"FALSE\",0,1),\n                              completedProjects = ifelse(badgedata$badge3$personBadgeCriteria[[1]]$status==\"FALSE\",0,1),\n                              fundedprojects = ifelse(badgedata$badge3$personBadgeCriteria[[2]]$status==\"FALSE\",0,1),\n                              badge3 = ifelse(badgedata$badge3$status==\"FALSE\",0,1)\n  )\n  return(tbl.DSRbadge)\n}\nget.DSRbadgeSummary <- function(tbl.DSRbadge){\n  require(dplyr)\n  tbl.DSRbadgeSummary <-  tbl.DSRbadge %>% summarise(profileCompleteness=sum(profileCompleteness),\n                                                     mediaCompleteness=sum(mediaCompleteness),\n                                                     responsiveness=sum(responsiveness),\n                                                     badge1=sum(badge1),\n                                                     projectData=sum(projectData),\n                                                     projectDocumentScore=sum(projectDocumentScore),\n                                                     badge2=sum(badge2),\n                                                     completedProjects=sum(completedProjects),\n                                                     fundedprojects= sum(fundedprojects),\n                                                     badge3=sum(badge3))\n  return (tbl.DSRbadgeSummary)\n}\nnames(allUsers) <- allUsers\ntbl.DSRbadge <- bind_rows(lapply(allUsers,function(uuid) get.DSRbadge(uuid)))\ntbl.DSRbadgeSummary <- get.DSRbadgeSummary(tbl.DSRbadge)\n\ntbl.users <- get.users()\n\ntbl.DSRbadge <- tbl.DSRbadge %>% filter(uuid %in% tbl.users$uuid)",
    "created" : 1487868147229.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2017779136",
    "id" : "9FEC0EA7",
    "lastKnownWriteTime" : 1488489913,
    "last_content_update" : 1488818492450,
    "path" : "~/Rproject/Badges/badgesDSR.R",
    "project_path" : "badgesDSR.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}